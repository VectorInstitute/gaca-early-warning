{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"\ud83d\udea8 GACA Early Warning System","text":""},{"location":"#noaa-urma-graph-neural-network-gcn-gru-temperature-forecasting","title":"NOAA URMA \u2192 Graph Neural Network (GCN-GRU) Temperature Forecasting","text":"<p>This repository contains the modular inference pipeline for the GACA Early Warning System, a high-resolution Graph Neural Network framework that generates localized temperature forecasts from NOAA URMA meteorological data.</p> <p>The pipeline takes the most recent URMA hourly fields, preprocesses them into graph-structured tensors, and produces multi-horizon (1\u201348h) temperature predictions across thousands of spatial nodes in Southwestern Ontario.</p>"},{"location":"#repository-structure","title":"Repository Structure","text":"<ul> <li><code>model/</code> \u2192 trained GNN model (.pth) + feature/target scalers</li> <li><code>data/</code> \u2192 inference graph (edge_index, edge_weight, node lat/lon)</li> <li><code>util/</code> \u2192 preprocessing, plotting, config loader, extraction utilities</li> <li><code>main.py</code> \u2192 end-to-end inference runner (fetch \u2192 preprocess \u2192 predict \u2192 save)</li> <li><code>gen_maps_from_preds.ipynb</code> \u2192 notebook for testing + visualizing predictions</li> <li><code>config.yaml</code> \u2192 main configuration for paths + model settings</li> </ul> <p>\u26a0\ufe0f Important: Update the paths inside <code>config.yaml</code> before running <code>main.py</code>, otherwise results will be saved inside the repo.</p>"},{"location":"#author","title":"Author","text":"<p>Joud El-Shawa - Vector Institute for AI &amp; Western University</p> <p>This repository is intended for early deployment testing of the GACA forecasting pipeline.</p>"},{"location":"dev_guide/","title":"GACA Early Warning System - Developer Guide","text":""},{"location":"dev_guide/#overview","title":"Overview","text":"<p>The project has been restructured into a professional package with a Next.js dashboard and FastAPI backend for production deployment.</p>"},{"location":"dev_guide/#directory-structure","title":"Directory Structure","text":"<pre><code>gaca-early-warning/\n\u251c\u2500\u2500 src/gaca_ews/              # Main Python package\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u251c\u2500\u2500 core/                  # Core utilities\n\u2502   \u2502   \u251c\u2500\u2500 config.py         # Configuration management\n\u2502   \u2502   \u251c\u2500\u2500 data_extraction.py # NOAA data fetching\n\u2502   \u2502   \u251c\u2500\u2500 preprocessing.py   # Data preprocessing\n\u2502   \u2502   \u251c\u2500\u2500 logger.py          # Logging utilities\n\u2502   \u2502   \u2514\u2500\u2500 plotting.py        # Visualization\n\u2502   \u251c\u2500\u2500 model/                 # Model definitions\n\u2502   \u2502   \u251c\u2500\u2500 gcngru.py         # GCNGRU architecture\n\u2502   \u2502   \u251c\u2500\u2500 final_model.pth    # Trained model checkpoint\n\u2502   \u2502   \u251c\u2500\u2500 feature_scaler.pkl # Feature scaler\n\u2502   \u2502   \u2514\u2500\u2500 target_scaler.pkl  # Target scaler\n\u2502   \u2514\u2500\u2500 cli/                   # Command-line interface\n\u2502       \u2514\u2500\u2500 main.py            # Inference pipeline CLI\n\u251c\u2500\u2500 backend/                   # FastAPI backend\n\u2502   \u251c\u2500\u2500 app/\n\u2502   \u2502   \u251c\u2500\u2500 main.py           # API routes and endpoints\n\u2502   \u2502   \u2514\u2500\u2500 __init__.py\n\u2502   \u251c\u2500\u2500 test_api.py           # Full API test suite\n\u2502   \u2514\u2500\u2500 requirements.txt\n\u251c\u2500\u2500 app/                       # Next.js dashboard\n\u2502   \u251c\u2500\u2500 app/                   # App router pages\n\u2502   \u2502   \u251c\u2500\u2500 layout.tsx        # Root layout\n\u2502   \u2502   \u251c\u2500\u2500 page.tsx          # Home page\n\u2502   \u2502   \u2514\u2500\u2500 globals.css       # Global styles\n\u2502   \u251c\u2500\u2500 package.json\n\u2502   \u251c\u2500\u2500 tsconfig.json\n\u2502   \u251c\u2500\u2500 tailwind.config.ts\n\u2502   \u2514\u2500\u2500 next.config.ts\n\u251c\u2500\u2500 data/                      # Graph and node data\n\u2502   \u251c\u2500\u2500 edge_index.pt\n\u2502   \u251c\u2500\u2500 edge_weight.pt\n\u2502   \u251c\u2500\u2500 nodes_latlon.csv\n\u2502   \u2514\u2500\u2500 G_base.pkl\n\u251c\u2500\u2500 model/                     # Legacy model artifacts\n\u251c\u2500\u2500 tests/                     # Unit tests\n\u251c\u2500\u2500 config.yaml                # Pipeline configuration\n\u251c\u2500\u2500 pyproject.toml             # Package configuration\n\u2514\u2500\u2500 README.md\n</code></pre>"},{"location":"dev_guide/#package-installation","title":"Package Installation","text":"<p>The project is now a proper Python package called <code>gaca-ews</code>:</p> <pre><code># Install with development dependencies\nuv sync --all-extras --dev\n\n# The package provides a CLI command\ngaca-ews --config config.yaml\n</code></pre>"},{"location":"dev_guide/#api-endpoints","title":"API Endpoints","text":"<p>The FastAPI backend provides the following endpoints:</p>"},{"location":"dev_guide/#get","title":"GET /","text":"<ul> <li>Root endpoint with API information</li> <li>Returns: <code>{message, version, status}</code></li> </ul>"},{"location":"dev_guide/#get-health","title":"GET /health","text":"<ul> <li>Health check endpoint</li> <li>Returns: <code>{status, model_loaded}</code></li> </ul>"},{"location":"dev_guide/#get-modelinfo","title":"GET /model/info","text":"<ul> <li>Model information and configuration</li> <li>Returns: Model architecture, features, horizons, region</li> </ul>"},{"location":"dev_guide/#post-predict","title":"POST /predict","text":"<ul> <li>Run full inference pipeline</li> <li>Request body: <code>{num_hours: 24}</code>  (optional, defaults to 24)</li> <li>Process:</li> <li>Fetches 24 hours of NOAA URMA data</li> <li>Preprocesses features with spatial consistency</li> <li>Runs GCNGRU model for 7 forecast horizons</li> <li>Returns predictions for all 14,005 grid points</li> <li>Returns: Array of predictions with structure:   <pre><code>{\n  \"forecast_time\": \"2025-11-18T09:00:00\",\n  \"horizon_hours\": 1,\n  \"lat\": 42.00008,\n  \"lon\": -80.84195,\n  \"predicted_temp\": 2.97\n}\n</code></pre></li> </ul>"},{"location":"dev_guide/#get-predictionslatest","title":"GET /predictions/latest","text":"<ul> <li>Retrieve most recent predictions from file</li> <li>Returns: Predictions from last inference run</li> </ul>"},{"location":"dev_guide/#testing-results","title":"Testing Results","text":""},{"location":"dev_guide/#api-validation","title":"API Validation \u2705","text":"<p>Total Predictions: 98,035 (14,005 locations \u00d7 7 horizons)</p> <p>Forecast Horizons: [1, 6, 12, 18, 24, 36, 48] hours</p> <p>Predictions per Horizon: - 1h: 14,005 locations - 6h: 14,005 locations - 12h: 14,005 locations - 18h: 14,005 locations - 24h: 14,005 locations - 36h: 14,005 locations - 48h: 14,005 locations</p> <p>Geographic Coverage: - Latitude: 42.00\u00b0 to 45.00\u00b0 N - Longitude: -81.00\u00b0 to -78.00\u00b0 W - Region: Southwestern Ontario</p> <p>Temperature Statistics (November 18, 2025): - Minimum: -7.3\u00b0C - Maximum: 8.7\u00b0C - Mean: 2.6\u00b0C</p>"},{"location":"dev_guide/#data-quality-checks","title":"Data Quality Checks \u2705","text":"<ul> <li>\u2713 All required fields present in predictions</li> <li>\u2713 Geographic bounds match configuration</li> <li>\u2713 Temperature values within reasonable range</li> <li>\u2713 Forecast horizons match model configuration</li> <li>\u2713 Spatial consistency maintained across timestamps</li> <li>\u2713 No NaN values in predictions</li> </ul>"},{"location":"dev_guide/#running-the-system","title":"Running the System","text":""},{"location":"dev_guide/#1-start-the-fastapi-backend","title":"1. Start the FastAPI Backend","text":"<pre><code># Option A: Using uvicorn directly\nuvicorn backend.app.main:app --host 0.0.0.0 --port 8000\n\n# Option B: Using the run script\nbash backend/run_server.sh\n\n# Option C: With auto-reload for development\nuvicorn backend.app.main:app --reload --host 0.0.0.0 --port 8000\n</code></pre> <p>The API will be available at: - API: http://localhost:8000 - Interactive docs: http://localhost:8000/docs - ReDoc: http://localhost:8000/redoc</p>"},{"location":"dev_guide/#2-start-the-nextjs-dashboard-optional","title":"2. Start the Next.js Dashboard (Optional)","text":"<pre><code>cd app\nnpm run dev\n</code></pre> <p>Dashboard will be available at: http://localhost:3000</p>"},{"location":"dev_guide/#3-run-inference","title":"3. Run Inference","text":"<pre><code># Via API\ncurl -X POST http://localhost:8000/predict \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"num_hours\": 24}'\n\n# Via CLI\ngaca-ews --config config.yaml\n</code></pre>"},{"location":"dev_guide/#testing","title":"Testing","text":""},{"location":"dev_guide/#run-unit-tests","title":"Run Unit Tests","text":"<pre><code>uv run pytest -m \"not integration_test\" --cov . tests\n</code></pre>"},{"location":"dev_guide/#run-full-api-test","title":"Run Full API Test","text":"<pre><code>uv run python backend/test_api.py\n# Note: Will prompt before running expensive inference test\n</code></pre>"},{"location":"dev_guide/#manual-api-testing","title":"Manual API Testing","text":"<pre><code># Health check\ncurl http://localhost:8000/health\n\n# Model info\ncurl http://localhost:8000/model/info\n\n# Run inference (takes ~45 seconds)\ncurl -X POST http://localhost:8000/predict \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"num_hours\": 24}' \\\n  -o predictions.json\n</code></pre>"},{"location":"dev_guide/#dependencies","title":"Dependencies","text":""},{"location":"dev_guide/#core-package","title":"Core Package","text":"<ul> <li>Python &gt;=3.12</li> <li>torch, torch-geometric (GNN framework)</li> <li>scikit-learn==1.7.1 (pinned to match trained models)</li> <li>pandas, numpy (data processing)</li> <li>boto3 (NOAA data fetching)</li> <li>pygrib (GRIB2 file parsing)</li> <li>fastapi, uvicorn (API framework)</li> </ul>"},{"location":"dev_guide/#dashboard","title":"Dashboard","text":"<ul> <li>Next.js 16</li> <li>React 19</li> <li>TypeScript 5</li> <li>Tailwind CSS 4</li> </ul>"},{"location":"dev_guide/#key-features","title":"Key Features","text":"<ol> <li>Modular Package Structure: Clean separation of concerns with <code>core</code>, <code>model</code>, and <code>cli</code> modules</li> <li>FastAPI Backend: Production-ready REST API with automatic documentation</li> <li>NOAA Integration: Automatic fetching of real-time meteorological data</li> <li>GNN-based Forecasting: GCNGRU model for spatiotemporal predictions</li> <li>Multi-horizon Predictions: 1, 6, 12, 18, 24, 36, and 48-hour forecasts</li> <li>Spatial Consistency: Graph-based preprocessing ensures valid spatial relationships</li> <li>Type Safety: Full type hints and validation with Pydantic</li> <li>CORS Support: Ready for frontend integration</li> <li>Next.js Dashboard: Modern UI framework for visualization</li> </ol>"},{"location":"dev_guide/#configuration","title":"Configuration","text":"<p>The <code>config.yaml</code> file controls all pipeline parameters:</p> <pre><code>model:\n  feature_scaler_path: \"./model/feature_scaler.pkl\"\n  target_scaler_path: \"./model/target_scaler.pkl\"\n  model_path: \"./model/final_model.pth\"\n\ngraph:\n  edge_index_path: \"./data/edge_index.pt\"\n  edge_weight_path: \"./data/edge_weight.pt\"\n  nodes_csv_path: \"./data/nodes_latlon.csv\"\n  G_base_path: \"./data/G_base.pkl\"\n\nregion:\n  lat_min: 42.0  # DO NOT CHANGE - tied to trained model\n  lat_max: 45.0\n  lon_min: -81.0\n  lon_max: -78.0\n\npred_offsets: [1, 6, 12, 18, 24, 36, 48]\nfeatures: [\"t2m\", \"d2m\", \"u10\", \"v10\", \"sp\", \"orog\"]\nmodel_arch: \"GCNGRU\"\n</code></pre>"},{"location":"dev_guide/#next-steps","title":"Next Steps","text":"<ol> <li>Dashboard Development: Implement visualization of predictions in Next.js</li> <li>Caching: Add Redis or similar for prediction caching</li> <li>Monitoring: Add Prometheus metrics and health monitoring</li> <li>Authentication: Implement API key or OAuth for production</li> <li>Rate Limiting: Add rate limiting for API endpoints</li> <li>Docker: Containerize the application</li> <li>CI/CD: Set up automated testing and deployment</li> </ol>"},{"location":"dev_guide/#notes","title":"Notes","text":"<ul> <li>The scikit-learn version is pinned to 1.7.1 to match the trained scaler artifacts</li> <li>NOAA data fetching requires internet access and may take 15-45 seconds</li> <li>Model inference takes ~5 seconds on CPU for all 14,005 nodes</li> <li>Predictions are automatically saved to <code>{run_dir}/predictions.csv</code></li> <li>The API server loads all model artifacts on startup (~5 seconds)</li> </ul>"}]}